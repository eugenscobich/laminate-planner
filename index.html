<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <title data-i18n="title"></title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

  <!-- Include the DXF parser library via CDN -->
  <script src="https://cdn.jsdelivr.net/npm/dxf-parser@1.1.2/dist/dxf-parser.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</head>
<body>
<div class="container-fluid">
  <div class="row min-vh-100">
    <div class="col-3">
      <div class="container-fluid pt-1">
        <div id="header" class="row text-center">
          <h1 data-i18n="title"></h1>
        </div>
        <div id="languages" class="row text-center">
          <p>
          <a href="index.html" onclick="changeLanguage('en')">en</a>
          <a href="index.html" onclick="changeLanguage('ro')">ro</a>
          <a href="index.html" onclick="changeLanguage('ru')">ru</a>
          </p>
        </div>
        <div id="controls" class="row">
          <div class="accordion" id="accordionExample">
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true"
                        aria-controls="collapseOne" data-i18n="floor-plan">
                </button>
              </h2>
              <div id="collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  <div class="row pb-2">
                    <label for="fileInput" class="col-3 col-form-label" data-i18n="dxf-file"></label>
                    <div class="col-9">
                      <input class="form-control" accept=".dxf" id="fileInput" type="file">
                    </div>
                  </div>

                  <div class="row">
                    <div class="btn-group" role="group">
                      <button type="button" class="btn btn-primary" id="rotateBy45" data-i18n="rotate-by-45"></button>
                      <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addALineModal" data-i18n="add-line"></button>
                      <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addARectangleModal">Add a rectangle</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false"
                        aria-controls="collapseTwo">
                  Laminate characteristics
                </button>
              </h2>
              <div id="collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  <div class="row pb-2">
                    <label for="boardCostInput" class="col-5 col-form-label">Board Cost:</label>
                    <div class="col-7">
                      <div class="input-group">
                        <input id="boardCostInput" class="form-control" min="1" type="number" value="400">
                        <span class="input-group-text">cost/m<sup>2</sup></span>
                      </div>
                    </div>
                  </div>
                  <div class="row pb-2">
                    <label for="lengthInput" class="col-5 col-form-label">Board Height:</label>
                    <div class="col-7">
                      <div class="input-group">
                        <input id="lengthInput" class="form-control" min="1" type="number" value="1380">
                        <span class="input-group-text">mm</span>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <label for="widthInput" class="col-5 col-form-label">Board Width:</label>
                    <div class="col-7">
                      <div class="input-group">
                        <input id="widthInput" class="form-control" min="1" type="number" value="191">
                        <span class="input-group-text">mm</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree"
                        aria-expanded="false"
                        aria-controls="collapseThree">
                  Arrangement settings
                </button>
              </h2>
              <div id="collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  <div class="row pb-2">
                    <label for="boardWidthOffsetInput" class="col-5 col-form-label">Wall Offset:</label>
                    <div class="col-7">
                      <div class="input-group">
                        <input id="boardWidthOffsetInput" class="form-control" max="0" min="-191" type="number" value="0">
                        <span class="input-group-text">mm</span>
                      </div>
                      <input id="boardWidthOffsetRangeInput" class="form-range" max="0" min="-191" type="range" value="0">
                    </div>
                  </div>
                  <div class="row pb-2">
                    <label for="boardLengthOffsetInput" class="col-5 col-form-label">Board Initial Cut:</label>
                    <div class="col-7">
                      <div class="input-group">
                        <input id="boardLengthOffsetInput" class="form-control" max="0" min="-1380" type="number" value="0">
                        <span class="input-group-text">mm</span>
                      </div>
                      <input id="boardLengthOffsetRangeInput" class="form-range" max="0" min="-1380" type="range" value="0">
                    </div>
                  </div>
                  <div class="row pb-2">
                    <label for="doNotUseSmallRemainingsCheckbox" class="col-5 col-form-label">Do not use small reimagining:</label>
                    <div class="col-7">
                      <input id="doNotUseSmallRemainingsCheckbox" class="form-check-input" type="checkbox">
                    </div>
                  </div>
                  <div class="row pb-2">
                    <label for="minBoardLengthInput" class="col-5 col-form-label">Minimal Board reimagining:</label>
                    <div class="col-7">
                      <div class="input-group">
                        <input id="minBoardLengthInput" class="form-control" min="1" type="number" value="191">
                        <span class="input-group-text">mm</span>
                      </div>
                    </div>
                  </div>
                  <div class="row pb-2">
                    <label for="arrangeModeSelect" class="col-5 col-form-label">Arrange Mode:</label>
                    <div class="col-7">
                      <select id="arrangeModeSelect" class="form-select">
                        <option value="continue">Continue</option>
                        <option value="halfShift">1/2</option>
                        <option value="thirdShift">1/3</option>
                        <option value="custom">Custom</option>
                      </select>
                    </div>
                  </div>

                  <div class="row">
                    <label for="customArrangeBoardOffsetInput" class="col-5 col-form-label">Board Offset:</label>
                    <div class="col-7">
                      <div class="input-group">
                        <input id="customArrangeBoardOffsetInput" class="form-control" max="1380" min="-1380" type="number" value="0">
                        <span class="input-group-text">mm</span>
                      </div>
                      <input id="customArrangeBoardOffsetRangeInput" class="form-range" max="1380" min="-1380" type="range" value="0">
                    </div>
                  </div>

                </div>
              </div>
            </div>

            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseForth"
                        aria-expanded="false"
                        aria-controls="collapseForth">
                  View settings
                </button>
              </h2>
              <div id="collapseForth" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  <div class="row">
                    <label for="showNumbersCheckbox" class="col-5 col-form-label">Show Board Numbers:</label>
                    <div class="col-7">
                      <input id="showNumbersCheckbox" class="form-check-input" type="checkbox" checked>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFifth"
                        aria-expanded="false"
                        aria-controls="collapseFifth">
                  Actions
                </button>
              </h2>
              <div id="collapseFifth" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  <div class="row">
                    <div class="btn-group" role="group" aria-label="Basic example">
                      <button type="button" class="btn btn-primary" id="fullCompleteButton">Full Complete</button>
                      <button type="button" class="btn btn-primary" id="addRowButton">Add Row</button>
                      <button type="button" class="btn btn-primary" id="addBoardButton">Add Board</button>
                      <button type="button" class="btn btn-primary" id="exportButton">Export</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSixth"
                        aria-expanded="false"
                        aria-controls="collapseSixth">
                  Statistics
                </button>
              </h2>
              <div id="collapseSixth" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  <div class="row">
                    <label for="totalNumberOfBoardsValue" class="col-7 col-form-label">Total number of boards:</label>
                    <div class="col-3">
                      <input type="text" readonly class="form-control-plaintext" style="text-align:right;" id="totalNumberOfBoardsValue" value="0">
                    </div>
                    <div class="col-2">
                    </div>
                  </div>
                  <div class="row">
                    <label for="totalSquareOfBoardsValue" class="col-7 col-form-label">Total square of boards:</label>
                    <div class="col-3">
                      <input type="text" readonly class="form-control-plaintext" style="text-align:right;" id="totalSquareOfBoardsValue" value="0">
                    </div>
                    <div class="col-2">
                      <span class="form-control-plaintext"> m<sup>2</sup></span>
                    </div>
                  </div>

                  <div class="row">
                    <label for="totalFloorSquareValue" class="col-7 col-form-label">Total floor square:</label>
                    <div class="col-3">
                      <input type="text" readonly class="form-control-plaintext" style="text-align:right;" id="totalFloorSquareValue" value="0">
                    </div>
                    <div class="col-2">
                      <span class="form-control-plaintext"> m<sup>2</sup></span>
                    </div>
                  </div>

                  <div class="row">
                    <label for="totalRemainingSquareValue" class="col-7 col-form-label">Total remaining square:</label>
                    <div class="col-3">
                      <input type="text" readonly class="form-control-plaintext" style="text-align:right;" id="totalRemainingSquareValue" value="0">
                    </div>
                    <div class="col-2">
                      <span class="form-control-plaintext"> m<sup>2</sup></span>
                    </div>
                  </div>

                  <div class="row">
                    <label for="totalCostValue" class="col-7 col-form-label">Total cost:</label>
                    <div class="col-3">
                      <input type="text" readonly class="form-control-plaintext" style="text-align:right;" id="totalCostValue" value="0">
                    </div>
                    <div class="col-2">
                      <span class="form-control-plaintext">cost</span>
                    </div>
                  </div>

                </div>
              </div>
            </div>

            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSeventh"
                        aria-expanded="false"
                        aria-controls="collapseSeventh">
                  Help
                </button>
              </h2>
              <div id="collapseSeventh" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  <p>
                    Help & Usage Guide
                    Welcome to the Laminate Floor Planner! This application lets you visualize, plan, and arrange laminate boards on your chosen floor layout. Use the guide below to get started and make the most of all available features.

                    1. Loading a Floor Plan
                    Open a DXF or SVG File:
                    Select the file type (DXF or SVG) from the dropdown.
                    Click the "Load Floor Plan" button and choose a valid .dxf or .svg file containing your floor outline.
                    View & Zoom:
                    Once loaded, you’ll see your floor plan lines on the main canvas.
                    Use your mouse scroll wheel or trackpad to zoom in/out.
                    Click & drag to pan around the canvas.
                    Bounds & Corners:
                    The application automatically detects the bounding box of your floor plan and highlights the corners if needed.
                    You can click a corner to mark your starting point for board placement.
                    2. Setting Board Parameters
                    Board Dimensions:
                    In the left controls, enter your board Height (H) and Width (W) in millimeters (or your chosen units).
                    Offset & Initial Cut:
                    Board Offset lets you offset successive rows by a chosen amount (e.g., half the board width).
                    Board Initial Cut helps simulate cutting the first board in the first row by a specified amount.
                    Minimal Board Remainings & Other Options:
                    Enable "Do not use small remainings" if you want to discard leftover pieces below a minimum length.
                    Optimize Start the Row tries to cleverly position the first board of each row.
                    3. Adding Rows & Boards
                    Select a Starting Corner:
                    Click on a detected corner of your floor plan (highlighted in blue) to choose where your board placement begins.
                    The application determines a direction (up, down, left, or right) based on that corner.
                    Add a Row or a Board:
                    Use the "Add Row" button to insert a new row of boards.
                    Use the "Add Board" button to place the next board in the current row segment.
                    Full Complete:
                    The "Full Complete" button attempts to fill the entire floor area with boards based on your current parameters, creating as many rows and boards as needed.
                    4. Editing & Arranging
                    Zoom & Pan:
                    Zoom with your mouse wheel; hold left-click and move to pan around.
                    Corner Selection & Rotation (Optional):
                    If your layout is not oriented as you prefer, you can use the rotation features (if enabled) to rotate the floor plan lines.
                    Confirm the rotation before starting board placement, or manually rotate your floor data in the distribution logic.
                    Adding Custom Lines & Rectangles (Optional):
                    You can add extra lines or rectangle shapes if needed, for example to draw internal walls or columns:
                    "Add Line": Supply start/end coordinates.
                    "Add Rectangle": Supply top-right and bottom-left corners.
                    5. Viewing Statistics
                    Statistics Section:
                    The “Statistics” area on the left panel shows:
                    Total number of boards used.
                    Total square of boards.
                    Floor area covered.
                    Remaining square from leftover pieces.
                    Estimated Cost based on the cost per m² you entered.
                    Cost Calculation:
                    Enter your Cost per square meter in the “Cost” field.
                    The application multiplies the total used board area by this cost to estimate your total spending.
                    6. Exporting Your Plan
                    Save as Raster Image (PNG/JPEG):
                    Currently, the simplest way is to screenshot the canvas or use a “Save as Image” button if provided.
                    Save as Vector (SVG/PDF):
                    You can export the lines and boards as SVG or a vector-based PDF, preserving the geometry for further editing in external programs.
                    7. Tips & Troubleshooting
                    Pan & Zoom Freedoms: If you can't pan the view, verify you aren’t in “add line” or “select corner” modes.
                    Ensure Valid Inputs: Double-check board height, width, offset, and initial cut values are numeric and make sense for your layout.
                    Small Boards or Gaps: If boards don’t fill the area exactly, consider adjusting the minimal remainings or initial cut.
                    Performance: Extremely large DXF or SVG files may slow down rendering. Consider simplifying your floor plan beforehand.
                    8. Additional Help
                    Keyboard Shortcuts (if any exist in your code):
                    Possibly add them here, e.g., Esc to cancel an action, or R to rotate.
                    Bug Reporting:
                    If you encounter issues or unexpected behavior, let us know by creating an issue on our GitHub repository or contacting support.
                    We hope you find the Laminate Floor Planner helpful! If you have more questions, check the official documentation or open a GitHub issue for assistance.
                  </p>
                </div>
              </div>
            </div>

            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEight"
                        aria-expanded="false"
                        aria-controls="collapseEight">
                  Buy me a Coffee
                </button>
              </h2>
              <div id="collapseEight" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  <p>
                    To be added
                  </p>
                </div>
              </div>
            </div>


          </div>
        </div>
      </div>
    </div>
    <div class="col-9">
      <div class="container-fluid border my-2 p-0" id="canvas-container">
        <canvas id="floorCanvas"></canvas>
      </div>
    </div>
  </div>
</div>



<!-- Modal -->
<div class="modal fade" id="addALineModal" tabindex="-1" aria-labelledby="addLineModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="addLineModalLabel">Add a line</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row pb-2">
          <label for="addALineStartX" class="col-5 col-form-label">Start X:</label>
          <div class="col-7">
            <input class="form-control" id="addALineStartX" type="number">
          </div>
        </div>
        <div class="row pb-2">
          <label for="addALineStartY" class="col-5 col-form-label">Start Y:</label>
          <div class="col-7">
            <input class="form-control" id="addALineStartY" type="number">
          </div>
        </div>
        <div class="row pb-2">
          <label for="addALineEndX" class="col-5 col-form-label">End X:</label>
          <div class="col-7">
            <input class="form-control" id="addALineEndX" type="number">
          </div>
        </div>
        <div class="row pb-2">
          <label for="addALineEndY" class="col-5 col-form-label">End Y:</label>
          <div class="col-7">
            <input class="form-control" id="addALineEndY" type="number">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="addALine">Add line</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="addARectangleModal" tabindex="-1" aria-labelledby="addRectangleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="addRectangleModalLabel">Add a rectangle</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row pb-2">
          <label for="addARectangleStartX" class="col-5 col-form-label">Bottom left corner X:</label>
          <div class="col-7">
            <input class="form-control" id="addARectangleStartX" type="number">
          </div>
        </div>
        <div class="row pb-2">
          <label for="addARectangleStartY" class="col-5 col-form-label">Bottom left corner Y:</label>
          <div class="col-7">
            <input class="form-control" id="addARectangleStartY" type="number">
          </div>
        </div>
        <div class="row pb-2">
          <label for="addARectangleEndX" class="col-5 col-form-label">Top right corner X:</label>
          <div class="col-7">
            <input class="form-control" id="addARectangleEndX" type="number">
          </div>
        </div>
        <div class="row pb-2">
          <label for="addARectangleEndY" class="col-5 col-form-label">Top right corner Y:</label>
          <div class="col-7">
            <input class="form-control" id="addARectangleEndY" type="number">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="addARectangle">Add rectangle</button>
      </div>
    </div>
  </div>
</div>


<!-- Add your site or application content here -->
<script src="js/languages.js"></script>
<script src="js/global.js"></script>
<script src="js/drawing.js"></script>
<script src="js/inputs-handlers.js"></script>
<script src="js/dxf-loader.js"></script>
<script src="js/geometry-helpers.js"></script>
<script src="js/app.js"></script>


</body>

</html>
